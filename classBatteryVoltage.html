<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Avionics: BatteryVoltage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="clemson.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Avionics
   </div>
   <div id="projectbrief">Core avionics package for CURE flight computers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classBatteryVoltage.html','','classBatteryVoltage-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">BatteryVoltage Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Simple ADC-based battery voltage helper. This class provides a way to read the battery voltage using an ADC pin and a scaling factor.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PowerManagement_8h_source.html">PowerManagement.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for BatteryVoltage:</div>
<div class="dyncontent">
<div class="center"><img src="classBatteryVoltage__coll__graph.png" border="0" usemap="#aBatteryVoltage_coll__map" loading="lazy" alt="Collaboration graph"/></div>
<map name="aBatteryVoltage_coll__map" id="aBatteryVoltage_coll__map">
<area shape="rect" title="Simple ADC&#45;based battery voltage helper. This class provides a way to read the battery voltage using ..." alt="" coords="5,5,141,111"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab55a05a6c577d769bcd76b782b6b7424" id="r_ab55a05a6c577d769bcd76b782b6b7424"><td class="memItemLeft">&#160;</td><td class="memItemRight"><a class="el" href="#ab55a05a6c577d769bcd76b782b6b7424">BatteryVoltage</a> (uint8_t adcPin, float factor, int numAdcBits, float voltageThreshold)</td></tr>
<tr class="memitem:a0b863d8ac1103926797c004ac152a475" id="r_a0b863d8ac1103926797c004ac152a475"><td class="memItemLeft">float&#160;</td><td class="memItemRight"><a class="el" href="#a0b863d8ac1103926797c004ac152a475">readVoltage</a> ()</td></tr>
<tr class="memdesc:a0b863d8ac1103926797c004ac152a475"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample the ADC and convert to battery voltage.  <br /></td></tr>
<tr class="memitem:a92adbc9d223f27da1d3ec769ce07a5b9" id="r_a92adbc9d223f27da1d3ec769ce07a5b9"><td class="memItemLeft">bool&#160;</td><td class="memItemRight"><a class="el" href="#a92adbc9d223f27da1d3ec769ce07a5b9">isLow</a> ()</td></tr>
<tr class="memdesc:a92adbc9d223f27da1d3ec769ce07a5b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether voltage exceeds a minimal threshold.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Simple ADC-based battery voltage helper. This class provides a way to read the battery voltage using an ADC pin and a scaling factor. </p>
<p>The correct pin can be found in the hardware scematics under "ADC_VOLTAGE" and the scaling factor can be calculated based on the voltage divider used in the hardware design. For MARTHA 1.4, the voltage divider is 200k and 1k5, so the factor is (200k + 1k5) / 1k5 = 134.33333.</p>
<p>The voltage at the pin is calculated as: vPin = (rawValue / (2^numAdcBits - 1)) * vRef where rawValue is the ADC reading, numAdcBits is the resolution of the ADC, and vRef is the reference voltage for the ADC (3.3V for MARTHA 1.4). The battery voltage is then calculated as: vBat = vPin * factor </p>

<p class="definition">Definition at line <a class="el" href="PowerManagement_8h_source.html#l00020">20</a> of file <a class="el" href="PowerManagement_8h_source.html">PowerManagement.h</a>.</p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab55a05a6c577d769bcd76b782b6b7424" name="ab55a05a6c577d769bcd76b782b6b7424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab55a05a6c577d769bcd76b782b6b7424">&#9670;&#160;</a></span>BatteryVoltage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BatteryVoltage::BatteryVoltage </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>adcPin</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>factor</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>numAdcBits</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>voltageThreshold</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adcPin</td><td>The ADC pin connected to the battery voltage divider. </td></tr>
    <tr><td class="paramname">factor</td><td>The scaling factor to convert the pin voltage to battery voltage. </td></tr>
    <tr><td class="paramname">numAdcBits</td><td>The resolution of the ADC (e.g., 12 for 12-bit ADC). </td></tr>
    <tr><td class="paramname">voltageThreshold</td><td>A threshold voltage for low battery checks (not used in current implementation but can be useful for future extensions). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PowerManagement_8h_source.html#l00028">28</a> of file <a class="el" href="PowerManagement_8h_source.html">PowerManagement.h</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a92adbc9d223f27da1d3ec769ce07a5b9" name="a92adbc9d223f27da1d3ec769ce07a5b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92adbc9d223f27da1d3ec769ce07a5b9">&#9670;&#160;</a></span>isLow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BatteryVoltage::isLow </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether voltage exceeds a minimal threshold. </p>
<dl class="section return"><dt>Returns</dt><dd>true if voltage is above the survival threshold. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Could be useful for future extension, like triggering a low power mode </dd></dl>

<p class="definition">Definition at line <a class="el" href="PowerManagement_8h_source.html#l00053">53</a> of file <a class="el" href="PowerManagement_8h_source.html">PowerManagement.h</a>.</p>

</div>
</div>
<a id="a0b863d8ac1103926797c004ac152a475" name="a0b863d8ac1103926797c004ac152a475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b863d8ac1103926797c004ac152a475">&#9670;&#160;</a></span>readVoltage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float BatteryVoltage::readVoltage </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sample the ADC and convert to battery voltage. </p>
<dl class="section return"><dt>Returns</dt><dd>Converted voltage reading. </dd></dl>

<p class="definition">Definition at line <a class="el" href="PowerManagement_8h_source.html#l00035">35</a> of file <a class="el" href="PowerManagement_8h_source.html">PowerManagement.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="PowerManagement_8h_source.html">PowerManagement.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="classBatteryVoltage.html">BatteryVoltage</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.16.1 </li>
  </ul>
</div>
</body>
</html>
